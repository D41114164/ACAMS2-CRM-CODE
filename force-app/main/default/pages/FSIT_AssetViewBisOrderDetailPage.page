<apex:page controller="FSIT_AssetViewBusinessAccountCtr" showHeader="false" standardStylesheets="false"
    sidebar="true" docType="html-5.0" action="{!dataInit}">
<apex:slds />
    <html xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <script src="https://code.jquery.com/jquery-3.4.1.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
    crossorigin="anonymous"></script>

    <script>

        function scrollDown() {
            $('html, body').animate({
                scrollTop: $(document).height()
            }, 'slow');
        }

    </script>

    <apex:form >
        <div class="slds-card">
            <article class="slds-card">

                <div class="slds-card__header slds-grid">
                    <header class="slds-media slds-media_center slds-has-flexi-truncate">
                        <div class="slds-media__figure">
                            <span class="slds-icon_container slds-icon-standard-account" title="account">
                                <svg class="slds-icon slds-icon_large" aria-hidden="true">
                                    <use xlink:href="{!URLFOR($Asset.SLDS, '/assets/icons/standard-sprite/svg/symbols.svg#orders')}"></use>
                                </svg>
                                <span class="slds-assistive-text">Assets</span>
                            </span>
                        </div>
                        <div class="slds-media__body">
                            <h2 class="slds-card__header-title">
                                <a href="javascript:void(0);" class="slds-card__header-link slds-truncate" title="Accounts">
                                    <span>Orders And Assets</span>
                                </a>
                            </h2>
                        </div>
                    </header>
                </div>
            </article>

            <div class="slds-card">
                <apex:outputpanel id="AssetListOrderSectionId">
                    <article class="slds-card">
                        <div class="slds-card__body slds-card__body_inner">
                            <b>Search Asset by Asset Type:</b>
                        </div>
                        <!-- <input type="text" id="name" onkeyup="doSearch();"  /> -->
                        <div class="slds-card__body slds-card__body_inner">
                            
                            <apex:selectList id="assetTypes" value="{!assetTypes}" size="1">
                                <apex:actionSupport event="onchange" rerender="AssetListOrderSectionId" action="{!runSearch}"  status="status"/>
                                <apex:selectOption itemValue="" itemLabel="-- NONE --"/>
                                <apex:selectOption itemValue="Assigned_Asset" itemLabel="Assigned Asset"/>
                                <apex:selectOption itemValue="Unassigned_Asset" itemLabel="Unassigned Asset"/>
                                <apex:selectOption itemValue="CC_Order" itemLabel="Order"/>
                                
                            </apex:selectList>
                            <!--
                            <apex:commandButton value="Go!" action="{!runSearch}" rerender="AssetListSectionId" status="status" immediate="true"/>
                            -->
                        </div>
                        <apex:actionStatus id="status" startText="requesting..." />
                        <footer class="slds-card__footer">
    
                        </footer>
                    </article>

                    <apex:outputpanel rendered="{!assetTypes!='CC_Order'}">
                        <table class="slds-table slds-table_cell-buffer slds-table_bordered slds-table_striped">
                            <thead>
                                <tr class="slds-line-height_reset">
                                    <th class="" scope="col">
                                        <div class="slds-truncate" title="Asset Name">Asset Name</div>
                                    </th>
    
                                    <th class="" scope="col">
                                        <div class="slds-truncate" title="Asset Name">Product Name</div>
                                    </th>
    
                                    <th class="" scope="col">
                                        <div class="slds-truncate" title="Asset Level">Level 1</div>
                                    </th>
    
                                    <th class="" scope="col">
                                        <div class="slds-truncate" title="Asset Level">Level 2</div>
                                    </th>
    
                                    <th class="" scope="col">
                                        <div class="slds-truncate" title="Asset Level">Level 3</div>
                                    </th>
    
                                    <th class="" scope="col">
                                        <div class="slds-truncate" title="Asset Expire date">Expire Date</div>
                                    </th>
    
                                    <th class="" scope="col">
                                        <div class="slds-truncate" title="Asset Payment">Payment Date</div>
                                    </th>
                                </tr>
                            </thead>
    
                            <tbody>
                                <apex:repeat value="{!displayAssetList}" var="asset">
                                    <tr class="slds-hint-parent">
                                        <td data-label="{!asset.Name}" scope="row">
                                            <div class="slds-truncate" title="Asset Type">
                                                <apex:outputLink target="_blank" value="/{!asset.Id}" id="theLink">{!asset.Name}</apex:outputLink>
                                            </div>
                                        </td>
    
                                        <td data-label="Asset Name">
                                            <div class="slds-truncate" title="Cloudhub">
                                                {!asset.CC_Product__r.Name}
                                            </div>
                                        </td>
    
                                        <td data-label="Asset Name">
                                            <div class="slds-truncate" title="Cloudhub">
                                                {!asset.Product_level_1__c}
                                            </div>
                                        </td>
    
                                        <td data-label="Asset Name">
                                            <div class="slds-truncate" title="Cloudhub">
                                                {!asset.Product_level_2__c}
                                            </div>
                                        </td>
    
                                        <td data-label="Asset Name">
                                            <div class="slds-truncate" title="Cloudhub">
                                                {!asset.Product_level_3__c}
                                            </div>
                                        </td>
    
                                        <td data-label="Asset Name">
                                            <div class="slds-truncate" title="Cloudhub">
                                                {!asset.CurrentExpirationDate__c}
                                            </div>
                                        </td>
    
                                        <td data-label="Asset Name">
                                            <div class="slds-truncate" title="Cloudhub">
                                                {!asset.InstallDate}
                                            </div>
                                        </td>
                                    </tr>
                                </apex:repeat>
                            </tbody>
                        </table>
    
                    </apex:outputpanel>
                    
                    <apex:outputpanel rendered="{!assetTypes=='CC_Order'}">
                        <!--
                        <article class="slds-card" style="background-color: rgb(144, 142, 142); color:white">
                            <div class="slds-card__body slds-card__body_inner">
                                <b>Asset Group Name(#) : {!assetGroupingValue} ({!displayAssetList.size}-{!groupNameSizeMap[assetGroupingValue]})</b>
                            </div>
                            <footer class="slds-card__footer">
    
                            </footer>
                        </article>
                        -->
                        <section class="slds-media__body">
                            <apex:outputpanel id="table">
                                <table class="slds-table slds-table_cell-buffer slds-table_bordered slds-table_striped">
                                    <thead>
                                        <tr class="slds-line-height_reset">
                                            <th class="" scope="col">
                                                <div class="slds-truncate" title="SKU Code">Order Name</div>
                                            </th>
            
                                            <th class="" scope="col">
                                                <div class="slds-truncate" title="Product Name">Order Status</div>
                                            </th>

                                            <th class="" scope="col">
                                                <div class="slds-truncate" title="Product Name">Total Amount</div>
                                            </th>

                                            <th class="" scope="col">
                                                <div class="slds-truncate" title="Product Name">Order Date</div>
                                            </th>
                                            
            
                                            <th class="" scope="col">
                                                <div class="slds-truncate" title="Total Asset">Order Asset #</div>
                                            </th>
                                        </tr>
                                    </thead>
            
                                    <tbody>
                                        <apex:repeat value="{!ccOrderIdSet}" var="ccOrderId">
                                            <tr class="slds-hint-parent">
                                                <!--
                                                <td data-label="{!key}" scope="row">
                                                    
                                                    <div class="slds-truncate" title="Asset Type">
                                                        <apex:actionRegion >
                                                            <apex:commandLink action="{!displayAssetsByGroupName}" value="{!key}" id="theCommandLink" rerender="AssetListSectionId" onclick="scrollDown();">
                                                                <apex:param name="assetGroupingValue" value="{!key}" assignTo="{!assetGroupingValue}" />
                                                            </apex:commandLink>
                                                        </apex:actionRegion>
                                                    </div>
                                               
                                                </td>
                                                 -->
                                                <td data-label="Order Name">
                                                    <div class="slds-truncate" title="Name">
                                                        <!-- <apex:actionRegion >
                                                            <apex:commandLink value="{!orderIdNameMap[ccOrderId]}" id="theCommandLink" rerender="AssetListSectionId"
                                                                onclick="window.open('/apex/FSIT_AssetViewBisOrderDetailPage?recordId={!sobjectId}&pdId={!productId}&orderName={!ccOrderId}','height=500, width=500');">
                                                            </apex:commandLink>
                                                        </apex:actionRegion> -->
                                                        <apex:outputLink target="_blank" value="/{!ccOrderId}" id="theLink">{!orderIdNameMap[ccOrderId]}</apex:outputLink>
                                                    </div>
                                                </td>
            
                                                <td data-label="Order Status">
                                                    <div class="slds-truncate" title="Status">
                                                        {!orderStatusMap[ccOrderId]}
                                                    </div>
                                                </td>
            
                                                <td data-label="Total Amount">
                                                    <div class="slds-truncate" title="Amount">
                                                        {!orderAmountMap[ccOrderId]}
                                                    </div>
                                                </td>
            
                                                <td data-label="Assigned Asset">
                                                    <div class="slds-truncate" title="Cloudhub">
                                                        {!orderDateMap[ccOrderId]}
                                                    </div>
                                                </td>
            
                                                <td data-label="unassigned Asset">
                                                    <div class="slds-truncate" title="Cloudhub">
                                                        {!orderAssetSize[ccOrderId]}
                                                    </div>
                                                </td>
            
                                            </tr>
                                        </apex:repeat>
                                    </tbody>
                                </table>
                            </apex:outputpanel>
                        </section>
                    
                    </apex:outputpanel>
                </apex:outputpanel>
            </div>
            </div>
    </apex:form>
    </html>
</apex:page>